var APP={socket:io.connect("http://gaz.local:3000"),gaid:"",emptyTag:"000000000000",timerSpeed:250,demoDelay:67500,slideSpeed:1500,slideDistance:340,slideDuration:750,fadeSpeed:750,inactiveOverlayOpacity:.6,overlayFade:750,slideBoxUpDelay:5e3,slideBoxUpBy:45,shadesInTime:5e3,bouncePause:2e3,bounceDistance:6,bounceSpeed:500,lastBounce:0,buttonSlideOut:1e3,buttonSlideIn:1500,dotsSpeedOut:1e3,dotsSpeedIn:1500,carouselBtnDelay:1e4,boxSpeedOut:1e3,boxSpeedMin:500,boxSpeedIn:1e3,inactiveSlideDown:1e3,demoSlidesIntSpeed:8e3,demoSlides:["library/images/h1/h1.jpg","library/images/h2/h2.jpg","library/images/h3/h3.jpg"],nailPolishDistance:112,nailPolishAniSpeed:1e3,nailPolishReset:92,downArrowDistance:313,downArrowAniSpeed:1e3,downArrowReset:303,lastInteraction:(new Date).getTime(),tags:null,fingers:[null,null,null,null,null],currentFingers:[null,null,null,null,null],tonePicked:!1,handsMoving:!1,slideBox:[null,null,null,null,null],slideBoxUpSet:[null,null,null,null,null],shadesIn:!1,demoing:!1,_gaq:null,carouselBtnsIn:!0,demoSlideInt:null,totalNails:0,firstStart:!0,minimising:!1,minimised:null,bounceShadeTimeout1:null,bounceShadeTimeout2:null,bounceShadeTimeout3:null,bounceShadeTimeout4:null,bounceShadeTimeout5:null,bounceTimeout1:null,bounceTimeout2:null,fullHand:!1,demoAni1:null,demoAni2:null,demoAni3:null,demoSlidesAni:null,aStartTime:0,aEndTime:0,aToneTaps:0,aToneSwipes:0,aToneChanges:0,aColourCount:0,aCleanStart:!1,aFirstPosition:null,aFirstColour:null,aMoreThanOneColour:!1,aShadeFirst:!1,aShadeThenTone:!1,intType:"",firstChange:!1,shadeToneFirst:!1,elDots:$("#dots"),elLeftBtn:$("#leftBtn"),elRightBtn:$("#rightBtn"),elSlide:$(".slide"),elFinger:$(".finger"),elDemo:$("#demo"),elDemoImages:$("#demoImages img"),elDemoImagesCont:$("#demoImages"),elNailPolish:$("#nailPolish"),elDownArrow:$("#downArrow"),init:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){APP._gaq=_gaq||[],_gaq.push(["_setAccount",APP.gaid]),_gaq.push(["_setDomainName","none"]),_gaq.push(["_trackPageview","index"]),APP.setTags(),APP.recieveData(),APP.carosuel(),APP.userInteractions(),APP.aStartTime=(new Date).getTime(),APP.emptyTray()},setTags:function(){console.log("getTags"),APP.tags={"6C00965C09AF":{src:"c1",colour:"#ffd1a2",code:"No. 100",name:"Nude Beige"},"6C0096A2F0A8":{src:"c2",colour:"#fcd0b5",code:"No. 101",name:"Nude Pink"},"6C009653F158":{src:"c3",colour:"#fdc1af",code:"No. 102",name:"English Rose"},"6C0096942D43":{src:"c4",colour:"#dab8b4",code:"No. 103",name:"Ash Rose"},"6C0096A3F5AC":{src:"c5",colour:"#edcea3",code:"No. 104",name:"Stone"},"6C00967E9410":{src:"c6",colour:"#b89976",code:"No. 105",name:"Mink"},KKK222222222:{src:"c7",colour:"#e2dbab",code:"No. 106",name:"Dark Trench"},KKK222222222:{src:"c8",colour:"#000000",code:"No. 107",name:"Light Gold"},"6C009678A220":{src:"c9",colour:"#8d8573",code:"No. 200",name:"Steel Grey"},"6C00963EAF6B":{src:"c10",colour:"#484645",code:"No. 201",name:"Graphite"},KKK222222222:{src:"c11",colour:"#5d4729",code:"No. 202",name:"Metalic Khaki"},KKK222222222:{src:"c12",colour:"#5e5e66",code:"No. 203",name:"Storm Grey"},"6C0096510CA7":{src:"c13",colour:"#6e5f39",code:"No. 204",name:"Khaki"},KKK222222222:{src:"c14",colour:"#000000",code:"No. 299",name:"Poppy Black"},KKK222222222:{src:"c15",colour:"#d20000",code:"No. 300",name:"Military Red"},KKK222222222:{src:"c16",colour:"#e21616",code:"No. 301",name:"Poppy Red"},KKK222222222:{src:"c17",colour:"#8d0524",code:"No. 302",name:"Lacquer Red"},"6C009653BB12":{src:"c18",colour:"#63021e",code:"No. 303",name:"Oxblood"}},APP.currentFingers[0]=APP.emptyTag,APP.currentFingers[1]=APP.emptyTag,APP.currentFingers[2]=APP.emptyTag,APP.currentFingers[3]=APP.emptyTag,APP.currentFingers[4]=APP.emptyTag},recieveData:function(){console.log("recieveData"),APP.socket.on("put_down",function(e){APP.fingers=e.fingers,console.log(APP.fingers)})},carosuel:function(){console.log("carosuel"),APP.elLeftBtn.on("tap",function(){APP.handsMoving===!1&&(APP.carousel.prev(),APP.intType="tap")}),APP.elRightBtn.on("tap",function(){APP.handsMoving===!1&&(APP.carousel.next(),APP.intType="tap")}),APP.carousel=new Swipe(document.getElementById("hands"),{startSlide:0,speed:APP.slideSpeed,auto:0,continuous:!0,disableScroll:!1,stopPropagation:!1,slideDuration:APP.slideDuration,slideDistance:APP.slideDistance,callback:function(e,n){APP.handsMoving=!0,$("#hands .active").removeClass("active"),$(n).addClass("active"),$.each(APP.elSlide,function(e,o){$(o).hasClass("active")?$(n).children(".inactiveOverlay").fadeOut(APP.overlayFade):$(o).children(".inactiveOverlay").css({display:"block",opacity:0}).animate({opacity:APP.inactiveOverlayOpacity},APP.overlayFade)})},transitionEnd:function(e){"tap"===APP.intType?APP.aToneTaps++:APP.aToneSwipes++,APP.intType="",APP.handsMoving=!1,$("#dots ul li.active").removeClass("active"),$(".dot"+e).addClass("active"),APP.lastInteraction=(new Date).getTime(),APP.aToneChanges++,APP.shadeToneFirst===!1?APP.shadeToneFirst=!0:APP.aShadeThenTone=!0}})},userInteractions:function(){console.log("userInteractions"),APP.elSlide.on("tap",function(){APP.lastInteraction=(new Date).getTime(),APP.bringInCarouselBtns()}),APP.elDemo.on("tap",function(){APP.exitDemo()}),$("#colour0").on("tap",function(){APP.colourButtonAction(0)}),$("#colour1").on("tap",function(){APP.colourButtonAction(1)}),$("#colour2").on("tap",function(){APP.colourButtonAction(2)}),$("#colour3").on("tap",function(){APP.colourButtonAction(3)}),$("#colour4").on("tap",function(){APP.colourButtonAction(4)})},exitDemo:function(){console.log("exitDemo"),APP.demoing=!1,APP.lastInteraction=(new Date).getTime(),APP.elDemo.fadeOut(APP.fadeSpeed),setTimeout(function(){APP.elDots.animate({bottom:29},APP.dotsSpeedIn),APP.bringInCarouselBtns(),APP.currentFingers[0]=APP.emptyTag,APP.currentFingers[1]=APP.emptyTag,APP.currentFingers[2]=APP.emptyTag,APP.currentFingers[3]=APP.emptyTag,APP.currentFingers[4]=APP.emptyTag,APP.elDemo.hide()},APP.fadeSpeed),clearTimeout(APP.demoSlideInt),clearTimeout(APP.demoAni1),clearTimeout(APP.demoAni2),clearTimeout(APP.demoAni3),clearTimeout(APP.demoSlidesAni),delete APP.demoSlideInt,delete APP.demoAni1,delete APP.demoAni2,delete APP.demoAni3,delete APP.demoSlidesAni,APP.aStartTime=(new Date).getTime(),APP.emptyTray()},colourButtonAction:function(e){console.log("colourButtonAction"),$("#colour"+e).hasClass("active")===!0&&(clearTimeout(APP.slideBox[e]),delete APP.slideBox[e],$("#colour"+e).animate({"margin-top":0},APP.fadeSpeed),$("#colourCode"+e).fadeIn(APP.fadeSpeed),APP.slideBox[e]=setTimeout(function(){$("#colour"+e).animate({"margin-top":-APP.slideBoxUpBy},APP.fadeSpeed),$("#colourCode"+e).fadeOut(APP.fadeSpeed)},APP.slideBoxUpDelay))},startTimer:function(){setTimeout(function(){var e=(new Date).getTime();APP.trayCheck(),APP.demoing===!1&&APP.carouselBtnsIn===!0&&e-APP.lastInteraction>=APP.carouselBtnDelay&&APP.removeCarouselBtns(),APP.demoing===!1&&e-APP.lastInteraction>=APP.demoDelay&&APP.demoMode(),APP.demoing===!1&&APP.shadesIn===!1&&APP.carouselBtnsIn===!1&&e-APP.lastInteraction>=APP.shadesInTime&&e-APP.lastBounce>=APP.shadesInTime&&APP.minimising===!1&&(null===APP.minimised||e-APP.minimised>=APP.shadesInTime)&&(APP.fadeInInactiveShades(),APP.bounceShadeTimeout1=setTimeout(function(){APP.bounceShades(),APP.bounceShadeTimeout2=setTimeout(function(){APP.bounceShades()},10*APP.bounceSpeed),APP.bounceShadeTimeout3=setTimeout(function(){APP.bounceShades()},20*APP.bounceSpeed),APP.bounceShadeTimeout4=setTimeout(function(){$("#shades .inactive").fadeOut(APP.fadeSpeed),APP.bounceShadeTimeout5=setTimeout(function(){$("#shades .inactive").css({"margin-top":-(2*APP.slideBoxUpBy)}),APP.shadesIn=!1,APP.lastBounce=(new Date).getTime()},APP.fadeSpeed)},30*APP.bounceSpeed)},APP.bouncePause)),APP.startTimer()},APP.timerSpeed)},trayCheck:function(){for(APP.totalNails=0,i=0;5>i;i++){var e=APP.fingers[i];null!==APP.fingers[i]&&APP.fingers[i]!==APP.emptyTag&&"object"==typeof APP.tags[e]&&APP.totalNails++}var n=!1;for(i=0;5>i;i++){var e=APP.fingers[i];if(null!==APP.fingers[i]&&APP.fingers[i]!==APP.currentFingers[i])if(APP.fingers[i]!==APP.emptyTag&&"object"==typeof APP.tags[e])if(APP.currentFingers[i]=APP.fingers[i],n=!0,APP.demoing===!0&&APP.exitDemo(),1===APP.totalNails?APP.fadeInAllFingers(i,e):APP.fadeInFinger(i,e),APP.aColourCount++,APP.firstChange===!1){var e=APP.fingers[i];APP.aFirstColour=APP.tags[e].name,APP.aFirstPosition=i,APP.firstChange=!0,APP.shadeToneFirst===!1&&(APP.aShadeFirst=!0)}else APP.aMoreThanOneColour=!0;else APP.demoing===!1&&APP.fingers[i]===APP.emptyTag&&(APP.currentFingers[i]=APP.fingers[i],APP.removeFinger(i),1===APP.totalNails&&APP.fadeInAllFingers(null,null),n=!0)}APP.demoing===!1&&n===!0&&(APP.lastInteraction=(new Date).getTime(),APP.fadeOutInactiveShades(),0===APP.totalNails&&APP.elFinger.fadeOut(APP.fadeSpeed),APP.tonePicked===!1&&(APP.tonePicked=!0,APP.carouselBtnsIn===!0&&APP.removeCarouselBtns()))},fadeInFinger:function(e,n){if(console.log("fadeInFinger"),APP.fullHand===!0){for(k=0;5>k;k++)APP.currentFingers[k]===APP.emptyTag&&$(".finger"+k).fadeOut(APP.fadeSpeed);APP.fullHand=!1}$(".finger"+e).fadeOut(APP.fadeSpeed),setTimeout(function(){$.each($(".finger"+e),function(o,P){var t=$(P).attr("src").substring(0,18);console.log(t),$(P).attr("src",t+APP.tags[n].src+"/f"+e+".png").fadeIn(APP.fadeSpeed)}),APP.shadeData(e,n)},APP.fadeSpeed)},fadeInAllFingers:function(e,n){console.log("fadeInAllFingers"),APP.fullHand=!0;var o=!1;if(null===e)for(o=!0,e=0;5>e&&APP.currentFingers[e]===APP.emptyTag;e++);var n=APP.fingers[e];for(k=0;5>k;k++)k!==e&&$(".finger"+k).fadeOut(APP.fadeSpeed);setTimeout(function(){for(k=0;5>k;k++)if(o===!1){var P=$(".finger"+k).attr("src").substring(0,18);console.log(P),$(".finger"+k).attr("src",P+APP.tags[n].src+"/f"+k+".png").fadeIn(APP.fadeSpeed),APP.shadeData(e,n)}else if(k!==e){var P=$(".finger"+k).attr("src").substring(0,18);console.log(P),$(".finger"+k).attr("src",P+APP.tags[n].src+"/f"+k+".png").fadeIn(APP.fadeSpeed)}},APP.fadeSpeed),delete path,n},shadeData:function(e,n){console.log("shadeData"),APP.minimising=!0,$("#colourCode"+e).html(APP.tags[n].code),$("#colourName"+e).html(APP.tags[n].name),$("#colour"+e).removeClass("inactive").addClass("active").css({"margin-top":-(2*APP.slideBoxUpBy),"background-color":APP.tags[n].colour,opacity:1}).animate({"margin-top":0},APP.boxSpeedIn),APP.slideBoxUpSet[e]=(new Date).getTime(),APP.slideBox[e]=setTimeout(function(){$("#colour"+e).animate({"margin-top":-APP.slideBoxUpBy},APP.boxSpeedMin),setTimeout(function(){APP.minimised=(new Date).getTime(),APP.minimising=!1},APP.boxSpeedMin)},APP.slideBoxUpDelay)},removeFinger:function(e){console.log("removeFinger"),$(".finger"+e).fadeOut(APP.fadeSpeed),$("#colour"+e).animate({"margin-top":-(2*APP.slideBoxUpBy)},APP.boxSpeedOut),setTimeout(function(){$("#colourCode"+e).html(""),$("#colourName"+e).html(""),$("#colour"+e).css({"background-color":"transparent"}).removeClass("active").addClass("inactive"),null!==APP.slideBoxUpSet[e]&&(APP.slideBoxUpSet[e]=null,clearTimeout(APP.slideBox[e]),delete APP.slideBox[e])},APP.boxSpeedOut)},removeCarouselBtns:function(){console.log("removeCarouselBtns"),APP.carouselBtnsIn=!1,APP.elLeftBtn.animate({left:-52},APP.buttonSlideOut,"ease-in-out"),APP.elRightBtn.animate({right:-52},APP.buttonSlideOut,"ease-in-out"),APP.lastInteraction=(new Date).getTime()},bringInCarouselBtns:function(){console.log("removeCarouselBtns"),APP.carouselBtnsIn=!0,APP.elLeftBtn.animate({left:20},APP.buttonSlideIn,"ease-in-out"),APP.elRightBtn.animate({right:20},APP.buttonSlideIn,"ease-in-out")},fadeOutInactiveShades:function(){console.log("fadeOutInactiveShades"),APP.shadesIn=!1,clearTimeout(APP.bounceShadeTimeout1),clearTimeout(APP.bounceShadeTimeout2),clearTimeout(APP.bounceShadeTimeout3),clearTimeout(APP.bounceShadeTimeout4),clearTimeout(APP.bounceShadeTimeout5),clearTimeout(APP.bounceTimeout1),clearTimeout(APP.bounceTimeout2),delete APP.bounceShadeTimeout1,delete APP.bounceShadeTimeout2,delete APP.bounceShadeTimeout3,delete APP.bounceShadeTimeout4,delete APP.bounceShadeTimeout5,delete APP.bounceTimeout1,delete APP.bounceTimeout2,$("#shades .inactive").animate({"margin-top":-(2*APP.slideBoxUpBy)},APP.boxSpeedIn)},fadeInInactiveShades:function(){console.log("fadeInInactiveShades"),APP.shadesIn=!0,$("#shades .inactive").css({opacity:1}),$("#shades .inactive").animate({"margin-top":0},APP.boxSpeedOut)},bounceShades:function(){console.log("bounceShades"),$("#shades .inactive").animate({"margin-top":-APP.bounceDistance},APP.bounceSpeed,"ease-in-out",function(){$("#shades .inactive").animate({"margin-top":0},APP.bounceSpeed,"ease-in-out")}),APP.bounceTimeout1=setTimeout(function(){$("#shades .inactive").animate({"margin-top":-APP.bounceDistance},APP.bounceSpeed,"ease-in-out",function(){$("#shades .inactive").animate({"margin-top":0},APP.bounceSpeed,"ease-in-out")})},2*APP.bounceSpeed),APP.bounceTimeout2=setTimeout(function(){$("#shades .inactive").animate({"margin-top":-APP.bounceDistance},APP.bounceSpeed,"ease-in-out",function(){$("#shades .inactive").animate({"margin-top":0},APP.bounceSpeed,"ease-in-out")})},4*APP.bounceSpeed)},demoMode:function(){for(console.log("startDemo"),APP.demoing=!0,APP.tonePicked=!1,i=0;5>i;i++)APP.removeFinger(i),APP.elFinger.fadeOut(APP.fadeSpeed);APP.removeCarouselBtns(),APP.fadeOutInactiveShades(),APP.elDots.animate({bottom:-47},APP.dotsSpeedOut,"ease-in-out"),APP.elDemo.fadeIn(APP.fadeSpeed),APP.demoAni(APP.elDemoImages.length),APP.firstStart===!0?APP.firstStart=!1:APP.analytics()},demoAni:function(e){console.log("demoAni"),APP.demoSlideInt=setInterval(function(){APP.elNailPolish.animate({top:APP.nailPolishDistance},APP.nailPolishAniSpeed,"ease-in-out"),APP.elDownArrow.animate({top:APP.downArrowDistance},APP.downArrowAniSpeed,"ease-in-out"),APP.demoAni1=setTimeout(function(){APP.elNailPolish.animate({top:APP.nailPolishReset},APP.nailPolishAniSpeed,"ease-in-out"),APP.elDownArrow.animate({top:APP.downArrowReset},APP.downArrowAniSpeed,"ease-in-out")},APP.nailPolishAniSpeed),APP.demoAni2=setTimeout(function(){APP.elNailPolish.animate({top:APP.nailPolishDistance},APP.nailPolishAniSpeed,"ease-in-out"),APP.elDownArrow.animate({top:APP.downArrowDistance},APP.downArrowAniSpeed,"ease-in-out"),APP.demoAni3=setTimeout(function(){APP.elNailPolish.animate({top:APP.nailPolishReset},APP.nailPolishAniSpeed,"ease-in-out"),APP.elDownArrow.animate({top:APP.downArrowReset},APP.downArrowAniSpeed,"ease-in-out")},APP.nailPolishAniSpeed)},2*APP.nailPolishAniSpeed),APP.demoSlidesAni=setTimeout(function(){for(i=0;i<APP.elDemoImages.length;i++){0===e&&(e=APP.elDemoImages.length),e--,$("#demoSlide"+e).fadeOut(APP.fadeSpeed);break}},6*APP.nailPolishAniSpeed),APP.demoAni()},APP.demoSlidesIntSpeed)},analytics:function(){APP.aEndTime=(new Date).getTime(),console.log("aStartTime: "+APP.aStartTime),console.log("aCleanStart: "+APP.aCleanStart),console.log("aShadeFirst: "+APP.aShadeFirst),console.log("aShadeThenTone: "+APP.aShadeThenTone),console.log("aToneTaps: "+APP.aToneTaps),console.log("aToneSwipes: "+APP.aToneSwipes),console.log("aToneChanges: "+APP.aToneChanges),console.log("aFirstPosition: "+APP.aFirstPosition),console.log("aFirstColour: "+APP.aFirstColour),console.log("aColourCount: "+APP.aColourCount),console.log("aMoreThanOneColour: "+APP.aMoreThanOneColour),console.log("aEndTime: "+APP.aEndTime),APP._gaq.push(["Session","Session length","",APP.aEndTime-APP.aStartTime]),APP._gaq.push(["Session","Clean start","",APP.aCleanStart]),APP._gaq.push(["Interaction","Shade first","",APP.aShadeFirst]),APP._gaq.push(["Interaction","Shade then tone","",APP.aShadeThenTone]),APP._gaq.push(["Interaction","Tone taps","",APP.aToneTaps]),APP._gaq.push(["Interaction","Tone swipes","",APP.aToneSwipes]),APP._gaq.push(["Interaction","Tone changes","",APP.aToneChanges]),APP._gaq.push(["Interaction","First position","",APP.aFirstPosition]),APP._gaq.push(["Interaction","First colour","",APP.aFirstColour]),APP._gaq.push(["Interaction","More than one colour","",APP.aMoreThanOneColour]),APP._gaq.push(["Interaction","Colour count","",APP.aColourCount]),APP.aStartTime=0,APP.aCleanStart=!1,APP.aShadeFirst=!1,APP.aShadeThenTone=!1,APP.aToneTaps=0,APP.aToneSwipes=0,APP.aToneChanges=0,APP.aFirstPosition=null,APP.aFirstColour=null,APP.aColourCount=0,APP.aMoreThanOneColour=!1,APP.aEndTime=0,APP.intType="",APP.firstChange=!1,APP.shadeToneFirst=!1},emptyTray:function(){APP.currentFingers[0]===APP.emptyTag&&APP.currentFingers[1]===APP.emptyTag&&APP.currentFingers[2]===APP.emptyTag&&APP.currentFingers[3]===APP.emptyTag&&APP.currentFingers[4]===APP.emptyTag&&(APP.aCleanStart=!0)}};$(function(){APP.init()});